---
sidebar_position: 1
title: Implantação do Embed
description: Como implantar e configurar n8n embarcado em produção
keywords: [n8n, embed, implantação, deployment, produção, iframe, SSO, segurança]
---


#ionicicon-namedocument-outline-style-fontsize-24px color: '#cor-ea4b71-implantao-do Embed

Este guia explica como **implantar o n8n embarcado** em ambiente de produção, cobrindo segurança, autenticação, performance, monitoramento, exemplos de deployment e troubleshooting para garantir integração robusta e segura com sua aplicação.

---

#ionicicon-nameshield-checkmark-outline-style-fontsize-24px color: '#cor-ea4b71-segurana-e Boas Práticas

#checklist-de-segurana-para-iframes

- Use `X-Frame-Options: SAMEORIGIN` ou `ALLOW-FROM` para restringir domínios
- Implemente `Content-Security-Policy` para limitar origens do embed
- Ative HTTPS obrigatório para todas as comunicações
- Restrinja tokens de autenticação por tempo e escopo
- Valide permissões do usuário a cada requisição

#exemplo-de-headers-nginx-nginx
add_header X-Frame-Options "ALLOW-FROM https://app.suaempresa.com" always;
add_header Content-Security-Policy "frame-ancestors 'self' https://app.suaempresa.com" always;
add_header Strict-Transport-Security "max-age=31536000; includeSubDomains" always;
```

---

#ionicicon-nameshield-checkmark-outline-style-fontsize-24px color: '#cor-ea4b71-sso-e Autenticação

#passos-para-sso-empresarial Configure SAML, OAuth2 ou LDAP conforme o sistema da empresa
- Mapeie usuários e permissões automaticamente
- Use tokens JWT ou API Key para autenticação do embed
- Exemplo de configuração SAML:

```yaml
N8N_SAML_ENABLED=true
N8N_SAML_ISSUER=https://sso.suaempresa.com
N8N_SAML_ENTRY_POINT=https://sso.suaempresa.com/sso
N8N_SAML_CERT=/path/to/certificate.pem
```

- Exemplo de configuração OAuth2:

```yaml
N8N_OAUTH2_AUTH_URL=https://sso.suaempresa.com/oauth/authorize
N8N_OAUTH2_TOKEN_URL=https://sso.suaempresa.com/oauth/token
N8N_OAUTH2_CLIENT_ID=seu_client_id
N8N_OAUTH2_CLIENT_SECRET=seu_client_secret
```

---

#ionicicon-namespeedometer-outline-style-fontsize-24px color: '#cor-ea4b71-performance-e Otimização

#recomendaes-use-lazy-loading para carregar o embed apenas quando necessário
- Ative cache de assets estáticos (CSS, JS, imagens)
- Monitore o tempo de carregamento do iframe
- Utilize CDN para servir arquivos estáticos do n8n
- Limite o número de workflows carregados por vez

#exemplo-de-cache-nginx-nginx
location ~* \.(js|css|png|jpg|svg)$ {
  expires 30d;
  add_header Cache-Control "public, max-age=2592000";
}
```

---

#ionicicon-namebug-outline-style-fontsize-24px color: '#cor-ea4b71-monitoramento-e Troubleshooting

#logs-e-alertas-ative logs de acesso e auditoria no backend do n8n
- Configure alertas para falhas de autenticação e erros de integração
- Use webhooks para notificar eventos críticos (ex: workflow.error, workflow.saved)
- Exemplo de webhook para monitoramento:

```json
{
  "event": "workflow.error",
  "workflowId": "abc123",
  "user": "user@empresa.com",
  "timestamp": "2024-06-01T12:00:00Z",
  "error": "Token inválido"
}
```

#estratgias-de-fallback-exiba mensagens de erro amigáveis no embed
- Implemente retry automático para falhas temporárias
- Redirecione para tela de login em caso de sessão expirada
- Mantenha logs detalhados para análise de incidentes

---

#ionicicon-namecloud-outline-style-fontsize-24px color: '#cor-ea4b71-exemplos-de Deployment

#docker-compose-para-produo-yaml
version: '3.8'
services:
  n8n:
    image: n8nio/n8n
    environment:
      - N8N_HOST=n8n.suaempresa.com
      - N8N_PROTOCOL=https
      - N8N_PORT=5678
      - N8N_USER_MANAGEMENT_DISABLED=false
      - N8N_RBAC_ENABLED=true
      - N8N_THEME_PRIMARY_COLOR=#cor-ea4b71-n8nthemelogourlhttpssuaempresacomlogopng-n8nsamlenabledtrue
      - N8N_SAML_ISSUER=https://sso.suaempresa.com
      - N8N_SAML_ENTRY_POINT=https://sso.suaempresa.com/sso
      - N8N_SAML_CERT=/path/to/certificate.pem
    volumes:
      - n8n_data:/home/node/.n8n
    ports:
      - "5678:5678"
    restart: always
    depends_on:
      - postgres
  postgres:
    image: postgres:15
    environment:
      - POSTGRES_USER=n8n
      - POSTGRES_PASSWORD=senha_forte
      - POSTGRES_DB=n8n
    volumes:
      - pg_data:/var/lib/postgresql/data
volumes:
  n8n_data:
  pg_data:
```

#proxy-reverso-com-nginx-nginx
server {
    listen 443 ssl http2;
    server_name n8n.suaempresa.com;

    ssl_certificate /etc/letsencrypt/live/n8n.suaempresa.com/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/n8n.suaempresa.com/privkey.pem;

    add_header X-Frame-Options "ALLOW-FROM https://app.suaempresa.com" always;
    add_header Content-Security-Policy "frame-ancestors 'self' https://app.suaempresa.com" always;
    add_header Strict-Transport-Security "max-age=31536000; includeSubDomains" always;

    location / {
        proxy_pass http://localhost:5678;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
    }
}
```

#cicd-para-automao-de-deployment

- Use GitHub Actions, GitLab CI ou outra ferramenta para automatizar build e deploy
- Exemplo de job para deploy automático:

```yaml
jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - name: Deploy para servidor
        run: |
          docker-compose pull
          docker-compose up -d
```

---

#ionicicon-namechevron-forward-outline-style-fontsize-24px color: '#cor-ea4b71-checklist-de Produção

- [ ] HTTPS obrigatório e certificado válido
- [ ] Domínios permitidos configurados (CORS e CSP)
- [ ] SSO e autenticação integrados
- [ ] Permissões e RBAC revisados
- [ ] Monitoramento e alertas ativos
- [ ] Mensagens de erro amigáveis e logs detalhados
- [ ] Backup e restore testados
- [ ] CI/CD automatizado para deploy

---

:::tip **Dica Pro**
Automatize o deploy do embed com CI/CD e monitore o uso do iframe para identificar gargalos de performance.
:::

:::warning **Importante**
Nunca exponha o n8n embed sem HTTPS e sem restrição de domínios. Teste todos os fluxos de autenticação e fallback antes de liberar para produção.
:::

