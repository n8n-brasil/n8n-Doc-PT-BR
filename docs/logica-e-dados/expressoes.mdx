---
sidebar_position: 2
title: Expressões n8n
description: Guia completo de expressões JavaScript no n8n para manipulação de dados, cálculos e lógica condicional
keywords: [n8n, expressões, javascript, dados, cálculos, manipulação, lógica]
---

<IonicIcon name="code-outline" style={{fontSize: '24px', color: '#ea4b71'}} />

## Expressões n8n

As **Expressões n8n** são fórmulas JavaScript que permitem usar dados dinâmicos, fazer cálculos e manipular informações em seus workflows. Elas são fundamentais para criar automações inteligentes e flexíveis.

---

<IonicIcon name="information-circle-outline" style={{fontSize: '24px', color: '#ea4b71'}} />

## O que são Expressões

Expressões são trechos de código JavaScript que:

- **Acessam dados** de nodes anteriores
- **Fazem cálculos** e transformações
- **Criam condições** dinâmicas
- **Formatam dados** para saída
- **Validam informações** em tempo real

---

<IonicIcon name="code-slash-outline" style={{fontSize: '24px', color: '#ea4b71'}} />

## Sintaxe Básica

As expressões no n8n usam a sintaxe `{{}}`:

```javascript
{{expressão_javascript_aqui}}
```

### Acessando Dados

Para acessar dados do item atual:

```javascript
// Acessar campo específico
{{$json.nome}}

// Acessar campo aninhado
{{$json.endereco.cidade}}

// Acessar array
{{$json.itens[0].nome}}

// Acessar propriedade dinâmica
{{$json['campo-dinamico']}}
```

Para acessar dados de nodes anteriores:

```javascript
// Dados do node "HTTP Request"
{{$('HTTP Request').json.resposta}}

// Dados do primeiro node
{{$('Manual Trigger').json.entrada}}

// Dados de múltiplos nodes
{{$('Node A').json.valor + $('Node B').json.valor}}
```

### Trabalhando com Items

Para trabalhar com múltiplos items:

```javascript
// Todos os items
{{$input.all()}}

// Primeiro item
{{$input.first()}}

// Item específico por índice
{{$input.item[0]}}

// Último item
{{$input.last()}}
```

---

<IonicIcon name="time-outline" style={{fontSize: '24px', color: '#ea4b71'}} />

## Funções de Data e Hora

### Data Atual

```javascript
// Data atual em ISO
{{$now.toISOString()}}

// Data formatada
{{$now.toFormat('dd/MM/yyyy HH:mm:ss')}}

// Timestamp Unix
{{$now.toMillis()}}

// Data em português
{{$now.toFormat('dd \'de\' MMMM \'de\' yyyy')}}
```

### Cálculos com Datas

```javascript
// Adicionar dias
{{ $now.plus({ days: 7 }).toISOString() }}

// Subtrair horas
{{ $now.minus({ hours: 2 }).toISOString() }}

// Diferença entre datas
{{$now.diff($json.data_anterior, 'days')}}

// Data específica
{{DateTime.fromISO('2024-01-15').toFormat('dd/MM/yyyy')}}
```

### Formatação de Datas

```javascript
// Formato brasileiro
{{$now.toFormat('dd/MM/yyyy')}}

// Com dia da semana
{{$now.toFormat('EEEE, dd \'de\' MMMM \'de\' yyyy')}}

// Hora apenas
{{$now.toFormat('HH:mm')}}

// Data relativa
{{$now.toRelative()}}
```

---

<IonicIcon name="text-outline" style={{fontSize: '24px', color: '#ea4b71'}} />

## Manipulação de Texto

### Operações Básicas

```javascript
// Concatenar strings
{{$json.nome + ' ' + $json.sobrenome}}

// Converter para maiúsculo
{{$json.texto.toUpperCase()}}

// Converter para minúsculo
{{$json.texto.toLowerCase()}}

// Capitalizar primeira letra
{{$json.texto.charAt(0).toUpperCase() + $json.texto.slice(1)}}
```

### Busca e Substituição

```javascript
// Verificar se contém texto
{{$json.texto.includes('palavra')}}

// Substituir texto
{{$json.texto.replace('antigo', 'novo')}}

// Substituir múltiplas ocorrências
{{$json.texto.replace(/antigo/g, 'novo')}}

// Extrair parte do texto
{{$json.texto.substring(0, 10)}}

// Dividir texto
{{$json.texto.split(',')}}
```

### Validação de Texto

```javascript
// Verificar se está vazio
{{$json.texto.length === 0}}

// Verificar se não está vazio
{{$json.texto && $json.texto.length > 0}}

// Validar email
{{/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test($json.email)}}

// Validar CPF (formato básico)
{{ /^\d{3}\.\d{3}\.\d{3}-\d{2}$/.test($json.cpf) }}
```

---

<IonicIcon name="calculator-outline" style={{fontSize: '24px', color: '#ea4b71'}} />

## Cálculos Matemáticos

### Operações Básicas

```javascript
// Soma
{{$json.valor1 + $json.valor2}}

// Subtração
{{$json.valor1 - $json.valor2}}

// Multiplicação
{{$json.quantidade * $json.preco}}

// Divisão
{{$json.total / $json.quantidade}}

// Módulo (resto)
{{$json.numero % 2}}
```

### Funções Matemáticas

```javascript
// Arredondar
{{Math.round($json.valor)}}

// Arredondar para cima
{{Math.ceil($json.valor)}}

// Arredondar para baixo
{{Math.floor($json.valor)}}

// Valor absoluto
{{Math.abs($json.valor)}}

// Potência
{{Math.pow($json.base, $json.expoente)}}

// Raiz quadrada
{{Math.sqrt($json.valor)}}
```

### Cálculos Financeiros

```javascript
// Calcular desconto
{{$json.valor * (1 - $json.desconto / 100)}}

// Calcular juros
{{$json.principal * (1 + $json.taxa / 100) ** $json.tempo}}

// Calcular média
{{($json.valor1 + $json.valor2 + $json.valor3) / 3}}

// Calcular porcentagem
{{($json.parte / $json.total) * 100}}
```

---

<IonicIcon name="chevron-forward-outline" style={{fontSize: '24px', color: '#ea4b71'}} />

## Próximos Passos

1. **[HTTP Request](../integracoes/credential-nodes/http-request.md)** - Usar expressões em requisições
2. **[Code Node](../status-plugins-code.mdx)** - JavaScript avançado
3. **[Tratamento de Erros](./flow-logic/error-handling)** - Lidar com falhas
4. **[Data Processing](../integracoes/builtin-nodes/data-processing/split-in-batches.mdx)** - Processar dados
5. **[Templates](../integracoes/templates.mdx)** - Ver exemplos práticos

> *Agora você domina as expressões n8n. Use essas técnicas para criar workflows dinâmicos e inteligentes!*

---

:::tip **Dica Pro**
Sempre teste suas expressões com dados reais para garantir que funcionem como esperado.
:::

:::warning **Importante**
Evite expressões muito complexas que possam impactar a performance do workflow.
:::

:::info **Recurso Adicional**
Use o Debug Helper para visualizar os dados disponíveis e testar suas expressões.
:::
