---
sidebar_position: 2
title: Clustering
description: Como implementar clustering para alta disponibilidade do n8n
keywords: [n8n, clustering, alta disponibilidade, escalabilidade, cluster]
---


#ionicicon-namedocument-outline-style-fontsize-24px color: '#cor-ea4b71-clustering-este documento explica como **implementar clustering** para alta disponibilidade do n8n, incluindo configuração de múltiplas instâncias, balanceamento de carga inteligente, sincronização de dados, failover automático, e arquiteturas distribuídas que garantem operação contínua mesmo com falhas de hardware ou software, proporcionando disponibilidade enterprise-grade para automações críticas de negócio.

#ionicicon-nameschool-outline-style-fontsize-24px color: '#cor-ea4b71-o-que você vai aprender

- Arquiteturas de cluster para n8n
- Configuração de múltiplas instâncias
- Balanceamento de carga inteligente
- Failover automático
- Monitoramento de cluster

---

#ionicicon-namechevron-forward-outline-style-fontsize-24px color: '#cor-ea4b71-por-que usar Clustering?

#benefcios-do-clustering-sem-clustering (Instância Única):**

- ❌ **Ponto único de falha** - Se o servidor cair, tudo para
- ❌ **Limitação de recursos** - Apenas um servidor disponível
- ❌ **Sem escalabilidade** - Não pode distribuir carga
- ❌ **Downtime durante manutenção** - Atualizações param o serviço

**Com Clustering (Múltiplas Instâncias):**

- ✅ **Alta disponibilidade** - Falhas não afetam o serviço
- ✅ **Escalabilidade horizontal** - Adicione servidores conforme necessário
- ✅ **Balanceamento de carga** - Distribui requisições automaticamente
- ✅ **Zero downtime** - Manutenção sem interrupção
- ✅ **Performance melhorada** - Múltiplos servidores processando

#quando-usar-clustering-use-clustering quando:**

- Precisa de **99.9%+ de disponibilidade**
- Tem **muitos usuários simultâneos**
- Processa **workflows críticos de negócio**
- Quer **escalabilidade automática**
- Precisa de **manutenção sem downtime**

---

#ionicicon-namegrid-outline-style-fontsize-24px color: '#cor-ea4b71-arquiteturas-de Cluster

#topologia-bsica-mermaid-graph-td
    A[Load Balancer] --> B[n8n Instance 1]
    A --> C[n8n Instance 2]
    A --> D[n8n Instance 3]
    
    B --> E[Shared Database]
    C --> E
    D --> E
    
    B --> F[Redis Cluster]
    C --> F
    D --> F
    
    style A fill:#cor-ffebee-style-b-fill#cor-e8f5e8-style-c-fill#cor-e8f5e8-style-d-fill#cor-e8f5e8-style-e-fill#cor-fff3e0-style-f-fill#cor-e1f5fe

#arquitetura-avanada-mermaid-graph-td
    A[Global Load Balancer] --> B[Regional LB 1]
    A --> C[Regional LB 2]
    
    B --> D[n8n Instance 1]
    B --> E[n8n Instance 2]
    B --> F[n8n Instance 3]
    
    C --> G[n8n Instance 4]
    C --> H[n8n Instance 5]
    C --> I[n8n Instance 6]
    
    D --> J[Database Cluster]
    E --> J
    F --> J
    G --> J
    H --> J
    I --> J
    
    D --> K[Redis Cluster]
    E --> K
    F --> K
    G --> K
    H --> K
    I --> K
    
    style A fill:#cor-ffcdd2-style-b-fill#cor-ffebee-style-c-fill#cor-ffebee-style-d-fill#cor-e8f5e8-style-e-fill#cor-e8f5e8-style-f-fill#cor-e8f5e8-style-g-fill#cor-e8f5e8-style-h-fill#cor-e8f5e8-style-i-fill#cor-e8f5e8-style-j-fill#cor-fff3e0-style-k-fill#cor-e1f5fe

#ionicicon-namesettings-outline-style-fontsize-24px color: '#cor-ea4b71-configurao-de Múltiplas Instâncias

#configurao-base

#instncia-principal-main-bash
#ionicicon-namesettings-outline-style-fontsize-24px color: '#cor-ea4b71-configurao-para instância principal
EXECUTIONS_PROCESS=main
EXECUTIONS_MODE=regular

#ionicicon-namegit-branch-outline-style-fontsize-24px color: '#cor-ea4b71-este-worker processa:
#ionicicon-namesparkles-outline-style-fontsize-24px color: '#cor-ea4b71-execues manuais
#ionicicon-namegit-network-outline-style-fontsize-24px color: '#cor-ea4b71-webhooks
#ionicicon-namegrid-outline-style-fontsize-24px color: '#cor-ea4b71-interface de usuário
#ionicicon-namegit-branch-outline-style-fontsize-24px color: '#cor-ea4b71-gerenciamento de workflows
```

#instncias-de-execuo-bash
#ionicicon-namesettings-outline-style-fontsize-24px color: '#cor-ea4b71-configurao-para instâncias de execução
EXECUTIONS_PROCESS=worker
EXECUTIONS_MODE=regular

#ionicicon-namegit-branch-outline-style-fontsize-24px color: '#cor-ea4b71-este-worker processa apenas:
#ionicicon-namegit-branch-outline-style-fontsize-24px color: '#cor-ea4b71-execues de workflows
#ionicicon-namegit-branch-outline-style-fontsize-24px color: '#cor-ea4b71-jobs da fila
#ionicicon-namebug-outline-style-fontsize-24px color: '#cor-ea4b71-retry de falhas
```

#docker-compose-com-cluster-yaml
version: '3.8'

services:
  #load-balancer-nginx-image-nginxalpine
    restart: unless-stopped
    ports:
      - "80:80"
      - "443:443"
    volumes:
      - ./nginx.conf:/etc/nginx/nginx.conf
      - ./ssl:/etc/nginx/ssl
    depends_on:
      - n8n-main
      - n8n-worker-1
      - n8n-worker-2
    networks:
      - n8n_network

  #instncia-principal-n8n-main-image-n8nion8nlatest
    restart: unless-stopped
    environment:
      - EXECUTIONS_PROCESS=main
      - EXECUTIONS_MODE=regular
      - REDIS_URL=redis://redis:6379
      - DB_TYPE=postgresdb
      - DB_POSTGRESDB_HOST=postgres
      - DB_POSTGRESDB_DATABASE=n8n
      - DB_POSTGRESDB_USER=n8n
      - DB_POSTGRESDB_PASSWORD=${DB_PASSWORD}
      - N8N_ENCRYPTION_KEY=${N8N_ENCRYPTION_KEY}
      - N8N_PROTOCOL=https
      - N8N_HOST=seudominio.com
    depends_on:
      - postgres
      - redis
    networks:
      - n8n_network

  #instncias-de-execuo-n8n-worker-1-image n8nio/n8n:latest
    restart: unless-stopped
    environment:
      - EXECUTIONS_PROCESS=worker
      - EXECUTIONS_MODE=regular
      - REDIS_URL=redis://redis:6379
      - DB_TYPE=postgresdb
      - DB_POSTGRESDB_HOST=postgres
      - DB_POSTGRESDB_DATABASE=n8n
      - DB_POSTGRESDB_USER=n8n
      - DB_POSTGRESDB_PASSWORD=${DB_PASSWORD}
      - N8N_ENCRYPTION_KEY=${N8N_ENCRYPTION_KEY}
    depends_on:
      - postgres
      - redis
    networks:
      - n8n_network

  n8n-worker-2:
    image: n8nio/n8n:latest
    restart: unless-stopped
    environment:
      - EXECUTIONS_PROCESS=worker
      - EXECUTIONS_MODE=regular
      - REDIS_URL=redis://redis:6379
      - DB_TYPE=postgresdb
      - DB_POSTGRESDB_HOST=postgres
      - DB_POSTGRESDB_DATABASE=n8n
      - DB_POSTGRESDB_USER=n8n
      - DB_POSTGRESDB_PASSWORD=${DB_PASSWORD}
      - N8N_ENCRYPTION_KEY=${N8N_ENCRYPTION_KEY}
    depends_on:
      - postgres
      - redis
    networks:
      - n8n_network

  #banco-de-dados-compartilhado-postgres
    image: postgres:15
    restart: unless-stopped
    environment:
      - POSTGRES_DB=n8n
      - POSTGRES_USER=n8n
      - POSTGRES_PASSWORD=${DB_PASSWORD}
    volumes:
      - postgres_data:/var/lib/postgresql/data
    networks:
      - n8n_network

  #redis-compartilhado-redis-image-redis7-alpine
    restart: unless-stopped
    command: redis-server --appendonly yes
    volumes:
      - redis_data:/data
    networks:
      - n8n_network

volumes:
  postgres_data:
  redis_data:

networks:
  n8n_network:
    driver: bridge
```

---

#ionicicon-namechevron-forward-outline-style-fontsize-24px color: '#cor-ea4b71-balanceamento-de Carga

#configurao-nginx

#nginxconf-para-cluster-nginx-events {
    worker_connections 1024;
}

http {
    #upstream-para-instncias-n8n-upstream n8n_backend {
        #instncia-principal-server-n8n-main5678-maxfails3 fail_timeout=30s;
        
        #instncias-de-execuo-server-n8n-worker-15678 max_fails=3 fail_timeout=30s;
        server n8n-worker-2:5678 max_fails=3 fail_timeout=30s;
        
        #health-check-keepalive-32

    #rate-limiting-limitreqzone-binaryremoteaddr-zoneapi10m rate=10r/s;
    limit_req_zone $binary_remote_addr zone=webhook:10m rate=30r/s;

    #gzip-compression-gzip-on-gzipvary on;
    gzip_min_length 1024;
    gzip_types text/plain text/css application/json application/javascript;

    server {
        listen 80;
        server_name seudominio.com;
        return 301 https://$server_name$request_uri;
    }

    server {
        listen 443 ssl http2;
        server_name seudominio.com;

        #ssl-configuration-sslcertificate-etcnginxsslcertpem-sslcertificatekey /etc/nginx/ssl/key.pem;
        ssl_protocols TLSv1.2 TLSv1.3;
        ssl_ciphers ECDHE-RSA-AES256-GCM-SHA512:DHE-RSA-AES256-GCM-SHA512;
        ssl_prefer_server_ciphers off;
        ssl_session_cache shared:SSL:10m;

        #security-headers-addheader-strict-transport-security-max-age31536000 includeSubDomains" always;
        add_header X-Frame-Options DENY always;
        add_header X-Content-Type-Options nosniff always;
        add_header X-XSS-Protection "1; mode=block" always;

        #api-endpoints-com-rate-limiting
        location /api/ {
            limit_req zone=api burst=20 nodelay;
            proxy_pass http://n8n_backend;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header X-Forwarded-Proto $scheme;
            
            #health-check-proxynextupstream-error-timeout invalid_header http_500 http_502 http_503 http_504;
        }

        #webhook-endpoints-com-rate-limiting
        location /webhook/ {
            limit_req zone=webhook burst=50 nodelay;
            proxy_pass http://n8n_backend;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header X-Forwarded-Proto $scheme;
            proxy_read_timeout 120s;
            
            #health-check-proxynextupstream-error-timeout invalid_header http_500 http_502 http_503 http_504;
        }

        #configurao-geral-location
            proxy_pass http://n8n_backend;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header X-Forwarded-Proto $scheme;
            proxy_set_header X-Forwarded-Host $host;
            proxy_set_header X-Forwarded-Port $server_port;

            #websocket-support-proxyhttpversion-11-proxysetheader Upgrade $http_upgrade;
            proxy_set_header Connection "upgrade";
            
            #health-check-proxynextupstream-error-timeout invalid_header http_500 http_502 http_503 http_504;
        }
    }
}
```

#haproxy-alternativa

#haproxycfg-bash-global-log-devlog local0
    log /dev/log local1 notice
    chroot /var/lib/haproxy
    stats socket /run/haproxy/admin.sock mode 660 level admin expose-fd listeners
    stats timeout 30s
    user haproxy
    group haproxy
    daemon

defaults
    log     global
    mode    http
    option  httplog
    option  dontlognull
    timeout connect 5000
    timeout client  50000
    timeout server  50000

frontend n8n_frontend
    bind *:80
    bind *:443 ssl crt /etc/ssl/certs/n8n.pem
    redirect scheme https if !{ ssl_fc }
    
    #acls-para-diferentes-tipos-de tráfego
    acl is_api path_beg /api/
    acl is_webhook path_beg /webhook/
    
    #rate-limiting-stick-table-type-ip size 100k expire 30s store http_req_rate(10s)
    http-request track-sc0 src
    http-request deny deny_status 429 if { sc_http_req_rate(0) gt 10 }
    
    default_backend n8n_backend

backend n8n_backend
    balance roundrobin
    option httpchk GET /healthz
    http-check expect status 200
    
    #instncias-n8n-server-n8n-main-n8n-main5678 check maxconn 100
    server n8n-worker-1 n8n-worker-1:5678 check maxconn 100
    server n8n-worker-2 n8n-worker-2:5678 check maxconn 100
    
    #configuraes-de-failover-option-redispatch
    retries 3
    timeout connect 5s
    timeout server 30s
```

---

#ionicicon-namebug-outline-style-fontsize-24px color: '#cor-ea4b71-failover-automtico

#health-checks

#endpoint-de-health-check-bash
#ionicicon-namesettings-outline-style-fontsize-24px color: '#cor-ea4b71-configurar-endpoint de health check
N8N_HEALTH_CHECK_ENDPOINT=/healthz
N8N_HEALTH_CHECK_TIMEOUT=5000
N8N_HEALTH_CHECK_INTERVAL=30000
```

#script-de-health-check-bash
#bin/bash
#ionicicon-namedocument-outline-style-fontsize-24px color: '#cor-ea4b71-health-checksh-n8nhostlocalhost
N8N_PORT="5678"
HEALTH_ENDPOINT="/healthz"

#ionicicon-namedocument-outline-style-fontsize-24px color: '#cor-ea4b71-verificar-se n8n está respondendo
if curl -f -s "http://$N8N_HOST:$N8N_PORT$HEALTH_ENDPOINT" > /dev/null; then
    echo "OK: n8n está saudável"
    exit 0
else
    echo "ERROR: n8n não está respondendo"
    exit 1
fi
```

#monitoramento-de-failover

#script-de-monitoramento-bash
#bin/bash
#ionicicon-namedocument-outline-style-fontsize-24px color: '#cor-ea4b71-monitor-clustersh

#ionicicon-namekey-outline-style-fontsize-24px color: '#cor-ea4b71-configuraes-clusternodesn8n-main "n8n-worker-1" "n8n-worker-2")
WEBHOOK_URL="https://hooks.slack.com/services/YOUR/WEBHOOK/URL"

#ionicicon-namedocument-outline-style-fontsize-24px color: '#cor-ea4b71-verificar-cada nó
for node in "${CLUSTER_NODES[@]}"; do
    if ! docker exec $node curl -f -s "http://localhost:5678/healthz" > /dev/null; then
        echo "ALERTA: Nó $node não está respondendo!"
        
        #enviar-notificao-curl-x-post $WEBHOOK_URL \
          -H "Content-type: application/json" \
          -d "{\"text\":\"🚨 Nó $node não está respondendo!\"}"
        
        #tentar-reiniciar-o-container-docker restart $node
    else
        echo "OK: Nó $node está saudável"
    fi
done
```

---

#ionicicon-namecloud-outline-style-fontsize-24px color: '#cor-ea4b71-kubernetes-deployment

#deployment-completo

#n8n-deploymentyaml-yaml-apiversion-appsv1-kind Deployment
metadata:
  name: n8n-main
  labels:
    app: n8n
    component: main
spec:
  replicas: 1
  selector:
    matchLabels:
      app: n8n
      component: main
  template:
    metadata:
      labels:
        app: n8n
        component: main
    spec:
      containers:
      - name: n8n
        image: n8nio/n8n:latest
        ports:
        - containerPort: 5678
        env:
        - name: EXECUTIONS_PROCESS
          value: "main"
        - name: EXECUTIONS_MODE
          value: "regular"
        - name: REDIS_URL
          value: "redis://redis-service:6379"
        - name: DB_TYPE
          value: "postgresdb"
        - name: DB_POSTGRESDB_HOST
          value: "postgres-service"
        - name: DB_POSTGRESDB_DATABASE
          value: "n8n"
        - name: DB_POSTGRESDB_USER
          valueFrom:
            secretKeyRef:
              name: n8n-secrets
              key: db-user
        - name: DB_POSTGRESDB_PASSWORD
          valueFrom:
            secretKeyRef:
              name: n8n-secrets
              key: db-password
        - name: N8N_ENCRYPTION_KEY
          valueFrom:
            secretKeyRef:
              name: n8n-secrets
              key: encryption-key
        - name: N8N_PROTOCOL
          value: "https"
        - name: N8N_HOST
          value: "seudominio.com"
        resources:
          requests:
            memory: "512Mi"
            cpu: "250m"
          limits:
            memory: "2Gi"
            cpu: "1000m"
        livenessProbe:
          httpGet:
            path: /healthz
            port: 5678
          initialDelaySeconds: 30
          periodSeconds: 10
        readinessProbe:
          httpGet:
            path: /healthz
            port: 5678
          initialDelaySeconds: 5
          periodSeconds: 5
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: n8n-worker
  labels:
    app: n8n
    component: worker
spec:
  replicas: 3
  selector:
    matchLabels:
      app: n8n
      component: worker
  template:
    metadata:
      labels:
        app: n8n
        component: worker
    spec:
      containers:
      - name: n8n
        image: n8nio/n8n:latest
        ports:
        - containerPort: 5678
        env:
        - name: EXECUTIONS_PROCESS
          value: "worker"
        - name: EXECUTIONS_MODE
          value: "regular"
        - name: REDIS_URL
          value: "redis://redis-service:6379"
        - name: DB_TYPE
          value: "postgresdb"
        - name: DB_POSTGRESDB_HOST
          value: "postgres-service"
        - name: DB_POSTGRESDB_DATABASE
          value: "n8n"
        - name: DB_POSTGRESDB_USER
          valueFrom:
            secretKeyRef:
              name: n8n-secrets
              key: db-user
        - name: DB_POSTGRESDB_PASSWORD
          valueFrom:
            secretKeyRef:
              name: n8n-secrets
              key: db-password
        - name: N8N_ENCRYPTION_KEY
          valueFrom:
            secretKeyRef:
              name: n8n-secrets
              key: encryption-key
        resources:
          requests:
            memory: "512Mi"
            cpu: "250m"
          limits:
            memory: "2Gi"
            cpu: "1000m"
        livenessProbe:
          httpGet:
            path: /healthz
            port: 5678
          initialDelaySeconds: 30
          periodSeconds: 10
        readinessProbe:
          httpGet:
            path: /healthz
            port: 5678
          initialDelaySeconds: 5
          periodSeconds: 5
```

#n8n-serviceyaml-yaml-apiversion-v1-kind Service
metadata:
  name: n8n-service
  labels:
    app: n8n
spec:
  selector:
    app: n8n
  ports:
  - port: 5678
    targetPort: 5678
    protocol: TCP
  type: ClusterIP
```

#n8n-ingressyaml-yaml-apiversion-networkingk8siov1-kind Ingress
metadata:
  name: n8n-ingress
  annotations:
    kubernetes.io/ingress.class: "nginx"
    cert-manager.io/cluster-issuer: "letsencrypt-prod"
    nginx.ingress.kubernetes.io/ssl-redirect: "true"
    nginx.ingress.kubernetes.io/force-ssl-redirect: "true"
spec:
  tls:
  - hosts:
    - seudominio.com
    secretName: n8n-tls
  rules:
  - host: seudominio.com
    http:
      paths:
      - path: /
        pathType: Prefix
        backend:
          service:
            name: n8n-service
            port:
              number: 5678
```

---

#ionicicon-namechevron-forward-outline-style-fontsize-24px color: '#cor-ea4b71-monitoramento-de Cluster

#mtricas-essenciais

#script-de-monitoramento-bash
#bin/bash
#ionicicon-namedocument-outline-style-fontsize-24px color: '#cor-ea4b71-monitor-cluster-metricssh-echo "=== Métricas do Cluster n8n ==="
echo

#ionicicon-nameperson-outline-style-fontsize-24px color: '#cor-ea4b71-status-dos containers
echo "1. Status dos Containers:"
docker ps --filter "name=n8n" --format "table {{.Names}}\t{{.Status}}\t{{.Ports}}"
echo

#ionicicon-nameschool-outline-style-fontsize-24px color: '#cor-ea4b71-uso-de recursos
echo "2. Uso de Recursos:"
docker stats --no-stream --format "table {{.Container}}\t{{.CPUPerc}}\t{{.MemUsage}}\t{{.NetIO}}"
echo

#ionicicon-namebug-outline-style-fontsize-24px color: '#cor-ea4b71-logs-de erro recentes
echo "3. Logs de Erro (últimas 10 linhas):"
docker logs --tail 10 n8n-main 2>&1 | grep -E "(ERROR|WARN)" || echo "Nenhum erro encontrado"
echo

#ionicicon-namedocument-outline-style-fontsize-24px color: '#cor-ea4b71-health-checks
echo "4. Health Checks:"
for container in n8n-main n8n-worker-1 n8n-worker-2; do
    if docker exec $container curl -f -s "http://localhost:5678/healthz" > /dev/null; then
        echo "✅ $container: Saudável"
    else
        echo "❌ $container: Não respondendo"
    fi
done
echo

#ionicicon-nameanalytics-outline-style-fontsize-24px color: '#cor-ea4b71-mtricas-redis
echo "5. Métricas Redis:"
echo "Jobs na fila: $(redis-cli llen n8n:queue:jobs)"
echo "Webhooks na fila: $(redis-cli llen n8n:queue:webhooks)"
echo "Jobs processados: $(redis-cli get n8n:stats:processed || echo '0')"
echo "Jobs falharam: $(redis-cli get n8n:stats:failed || echo '0')"
```

#alertas-automticos

#configurao-de-alertas-bash
#bin/bash
#ionicicon-namewarning-outline-style-fontsize-24px color: '#cor-ea4b71-cluster-alertssh

#ionicicon-namekey-outline-style-fontsize-24px color: '#cor-ea4b71-configuraes-webhookurlhttpshooksslackcomservicesyourwebhookurl
ALERT_THRESHOLD_CPU=80
ALERT_THRESHOLD_MEMORY=85
ALERT_THRESHOLD_QUEUE=1000

#ionicicon-namedocument-outline-style-fontsize-24px color: '#cor-ea4b71-verificar-cpu
CPU_USAGE=$(docker stats --no-stream --format "{{.CPUPerc}}" n8n-main | sed 's/%//')
if (( $(echo "$CPU_USAGE > $ALERT_THRESHOLD_CPU" | bc -l) )); then
    curl -X POST $WEBHOOK_URL \
      -H "Content-type: application/json" \
      -d "{\"text\":\"⚠️ CPU alta: ${CPU_USAGE}%\"}"
fi

#ionicicon-namesparkles-outline-style-fontsize-24px color: '#cor-ea4b71-verificar-memria
MEMORY_USAGE=$(docker stats --no-stream --format "{{.MemPerc}}" n8n-main | sed 's/%//')
if (( $(echo "$MEMORY_USAGE > $ALERT_THRESHOLD_MEMORY" | bc -l) )); then
    curl -X POST $WEBHOOK_URL \
      -H "Content-type: application/json" \
      -d "{\"text\":\"⚠️ Memória alta: ${MEMORY_USAGE}%\"}"
fi

#ionicicon-namedocument-outline-style-fontsize-24px color: '#cor-ea4b71-verificar-fila
QUEUE_SIZE=$(redis-cli llen n8n:queue:jobs)
if [ $QUEUE_SIZE -gt $ALERT_THRESHOLD_QUEUE ]; then
    curl -X POST $WEBHOOK_URL \
      -H "Content-type: application/json" \
      -d "{\"text\":\"⚠️ Fila muito grande: $QUEUE_SIZE jobs\"}"
fi
```

---

#ionicicon-namebug-outline-style-fontsize-24px color: '#cor-ea4b71-troubleshooting

#problemas-comuns

#instncia-no-inicia-bash
#ionicicon-namedocument-outline-style-fontsize-24px color: '#cor-ea4b71-verificar-logs
docker logs n8n-main

#ionicicon-namedocument-outline-style-fontsize-24px color: '#cor-ea4b71-verificar-variveis de ambiente
docker exec n8n-main env | grep -E "(DB_|REDIS_|N8N_)"

#ionicicon-namedocument-outline-style-fontsize-24px color: '#cor-ea4b71-verificar-conectividade com banco
docker exec n8n-main nc -zv postgres 5432

#ionicicon-nameserver-outline-style-fontsize-24px color: '#cor-ea4b71-verificar-conectividade com Redis
docker exec n8n-main nc -zv redis 6379
```

#load-balancer-no-distribui-carga

```bash
#ionicicon-namesettings-outline-style-fontsize-24px color: '#cor-ea4b71-verificar-configurao nginx
nginx -t

#ionicicon-namedocument-outline-style-fontsize-24px color: '#cor-ea4b71-verificar-upstream
curl -I http://n8n-main:5678/healthz
curl -I http://n8n-worker-1:5678/healthz
curl -I http://n8n-worker-2:5678/healthz

#ionicicon-namedocument-outline-style-fontsize-24px color: '#cor-ea4b71-verificar-logs nginx
tail -f /var/log/nginx/error.log
```

#falhas-de-failover-bash
#ionicicon-namedocument-outline-style-fontsize-24px color: '#cor-ea4b71-verificar-health checks
for node in n8n-main n8n-worker-1 n8n-worker-2; do
    echo "=== $node ==="
    docker exec $node curl -f http://localhost:5678/healthz
    echo
done

#ionicicon-namedocument-outline-style-fontsize-24px color: '#cor-ea4b71-verificar-conectividade entre nós
docker network inspect n8n_network
```

---

#ionicicon-namechevron-forward-outline-style-fontsize-24px color: '#cor-ea4b71-checklist-de Produção

#configurao-mltiplas instâncias configuradas
- [ ] Load balancer configurado
- [ ] Health checks implementados
- [ ] Failover automático testado
- [ ] Banco de dados compartilhado configurado

#performance-balanceamento de carga funcionando
- [ ] Timeouts configurados adequadamente
- [ ] Rate limiting aplicado
- [ ] Monitoramento ativo
- [ ] Alertas configurados

#monitoramento-mtricas sendo coletadas
- [ ] Logs centralizados
- [ ] Alertas funcionando
- [ ] Dashboard de monitoramento
- [ ] Backup de configurações

#segurana-ssltls configurado
- [ ] Acesso restrito por IP
- [ ] Secrets gerenciados adequadamente
- [ ] Logs de auditoria ativos
- [ ] Backup e recuperação testados

---

#ionicicon-namearrow-forward-circle-outline-style-fontsize-24px color: '#cor-ea4b71-prximos-passos

Agora que você configurou o clustering:

1. **[Load Balancing](./load-balancing)** - Configure balanceamento de carga avançado
2. **[Performance](./performance)** - Otimize performance do cluster
3. **[Segurança](../seguranca/autenticacao)** - Configure autenticação avançada
4. **[Backup e Recovery](../seguranca/backup-recovery)** - Implemente estratégias de backup

---

:::tip **Dica Pro**
Configure pelo menos 3 instâncias para alta disponibilidade real. Monitore a distribuição de carga e ajuste conforme necessário.
:::

:::warning **Importante**
Sempre teste o failover em ambiente de desenvolvimento antes de aplicar em produção. Falhas de failover podem causar interrupção total do serviço.
:::

