---
title: ViaCEP
description: Integração com a API ViaCEP para consulta de CEPs brasileiros no n8n
sidebar_position: 1
keywords: [n8n, viacep, cep, endereço, brasil, localização, api]
---

#ionicicon-namelocation-outline-style-fontsize-24px color: '#cor-ea4b71-viacep-o **ViaCEP** é uma API gratuita que permite consultar endereços brasileiros através do CEP. Esta integração permite que você valide e complete endereços automaticamente em seus workflows n8n.

#o-que-o-viacep

O ViaCEP é um serviço que fornece dados de endereços brasileiros baseado no CEP (Código de Endereçamento Postal). Ele é mantido pelos Correios e oferece:

- **Consulta gratuita** de CEPs
- **Dados oficiais** dos Correios
- **API REST** simples de usar
- **Sem necessidade** de cadastro
- **Alta disponibilidade** e confiabilidade

#cor-dados-retornados-para-cada-cep consultado, o ViaCEP retorna:

```json
{
  "cep": "01001-000",
  "logradouro": "Praça da Sé",
  "complemento": "lado ímpar",
  "bairro": "Sé",
  "localidade": "São Paulo",
  "uf": "SP",
  "ibge": "3550308",
  "gia": "1004",
  "ddd": "11",
  "siafi": "7107"
}
```

#como-usar-o-viacep-no n8n

#id-1-configurao-bsica-node-http Request
**Método:** GET
**URL:** `https://viacep.com.br/ws/{{ $json.cep }}/json/`

#id-2-parmetros-cep-cep a ser consultado (formato: 00000-000 ou 00000000)

#id-3-exemplo-de-configurao-javascript
// Configuração do HTTP Request
Method: GET
URL: https://viacep.com.br/ws/{{ $json.cep }}/json/
```

#casos-de-uso

#id-1-validao-de-endereos-validar se um CEP existe e retorna dados válidos:

```javascript
// Workflow: Validação de CEP
Webhook → HTTP Request (ViaCEP) → If (CEP válido) → Set → HTTP Request (Salvar)
```

**Configuração:**
- **HTTP Request**: Consulta ViaCEP
- **If**: Verifica se `$json.erro` não existe
- **Set**: Formata dados do endereço
- **HTTP Request**: Salva dados validados

#id-2-preenchimento-automtico-de-formulrios

Completar formulários com dados do CEP:

```javascript
// Workflow: Preenchimento de Formulário
Manual Trigger → HTTP Request (ViaCEP) → Set → HTTP Request (Enviar Formulário)
```

**Configuração:**
- **Manual Trigger**: Entrada do CEP
- **HTTP Request**: Consulta ViaCEP
- **Set**: Mapeia dados para formulário
- **HTTP Request**: Envia formulário preenchido

#id-3-clculo-de-frete-usar dados do CEP para calcular frete:

```javascript
// Workflow: Cálculo de Frete
Webhook (Pedido) → HTTP Request (ViaCEP) → HTTP Request (API Frete) → Notificação
```

**Configuração:**
- **Webhook**: Recebe pedido com CEP
- **HTTP Request**: Consulta ViaCEP
- **HTTP Request**: Calcula frete com dados do endereço
- **Notificação**: Envia resultado para cliente

#id-4-segmentao-geogrfica-classificar-clientes por região:

```javascript
// Workflow: Segmentação Geográfica
Webhook (Novo Cliente) → HTTP Request (ViaCEP) → Switch (Por UF) → Processamento
```

**Configuração:**
- **Webhook**: Recebe dados do cliente
- **HTTP Request**: Consulta ViaCEP
- **Switch**: Direciona por estado (UF)
- **Processamento**: Aplica regras específicas da região

#exemplos-prticos

#exemplo-1-validao-de-cep em E-commerce

**Cenário:** Validar CEP durante checkout de e-commerce.

**Workflow:**
```
Webhook (Checkout) → HTTP Request (ViaCEP) → If (CEP Válido) → Processar Pedido
                ↓
            CEP Inválido → Notificar Cliente
```

**Configuração:**
```javascript
// HTTP Request - ViaCEP
Method: GET
URL: https://viacep.com.br/ws/{{ $json.cep }}/json/

// If - Validação
Condition: $json.erro === undefined

// Set - Dados do Endereço
{
  "cep": "{{ $('ViaCEP').json.cep }}",
  "logradouro": "{{ $('ViaCEP').json.logradouro }}",
  "bairro": "{{ $('ViaCEP').json.bairro }}",
  "cidade": "{{ $('ViaCEP').json.localidade }}",
  "estado": "{{ $('ViaCEP').json.uf }}"
}
```

#exemplo-2-preenchimento-de-formulrio de Cadastro

**Cenário:** Preencher automaticamente campos de endereço.

**Workflow:**
```
Manual Trigger → HTTP Request (ViaCEP) → Set → HTTP Request (Salvar Cliente)
```

**Configuração:**
```javascript
// Manual Trigger - Entrada
{
  "cep": "01310-100"
}

// HTTP Request - ViaCEP
Method: GET
URL: https://viacep.com.br/ws/{{ $json.cep }}/json/

// Set - Mapeamento
{
  "nome": "{{ $json.nome }}",
  "email": "{{ $json.email }}",
  "cep": "{{ $('ViaCEP').json.cep }}",
  "endereco": "{{ $('ViaCEP').json.logradouro }}",
  "bairro": "{{ $('ViaCEP').json.bairro }}",
  "cidade": "{{ $('ViaCEP').json.localidade }}",
  "estado": "{{ $('ViaCEP').json.uf }}",
  "ddd": "{{ $('ViaCEP').json.ddd }}"
}
```

#exemplo-3-sistema-de-delivery

**Cenário:** Validar endereço para delivery.

**Workflow:**
```
Webhook (Pedido) → HTTP Request (ViaCEP) → If (Zona de Entrega) → Agendar Entrega
              ↓
          Fora da Zona → Notificar Indisponibilidade
```

**Configuração:**
```javascript
// HTTP Request - ViaCEP
Method: GET
URL: https://viacep.com.br/ws/{{ $json.cep }}/json/

// If - Zona de Entrega
Condition: $('ViaCEP').json.localidade === "São Paulo" && 
          ($('ViaCEP').json.bairro === "Vila Madalena" || 
           $('ViaCEP').json.bairro === "Pinheiros" ||
           $('ViaCEP').json.bairro === "Vila Olímpia")
```

#tratamento-de-erros

#id-1-cep-no-encontrado-quando o CEP não existe, o ViaCEP retorna:

```json
{
  "erro": true
}
```

**Tratamento:**
```javascript
// If - CEP Inválido
Condition: $json.erro === true

// Set - Mensagem de Erro
{
  "erro": true,
  "mensagem": "CEP não encontrado. Verifique o número informado.",
  "cep_informado": "{{ $('Manual Trigger').json.cep }}"
}
```

#id-2-cep-invlido-para-ceps com formato inválido:

```javascript
// Code - Validação de Formato
const cep = $json.cep.replace(/\D/g, '');
if (cep.length !== 8) {
  throw new Error('CEP deve ter 8 dígitos');
}
```

#id-3-rate-limiting-o-viacep tem limites de uso:

```javascript
// Code - Tratamento de Rate Limit
try {
  // Fazer requisição
} catch (error) {
  if (error.httpCode === 429) {
    // Aguardar e tentar novamente
    await new Promise(resolve => setTimeout(resolve, 1000));
    // Retry logic
  }
}
```

#boas-prticas

#id-1-formatao-de-cep-sempre formate o CEP antes da consulta:

```javascript
// Code - Formatação de CEP
const cep = $json.cep.replace(/\D/g, ''); // Remove caracteres não numéricos
const cepFormatado = cep.replace(/^(\d{5})(\d{3})$/, '$1-$2'); // Adiciona hífen
```

#id-2-cache-de-consultas-implemente cache para CEPs consultados frequentemente:

```javascript
// Code - Cache Simples
const cep = $json.cep;
const cacheKey = `cep_${cep}`;

// Verificar cache (implementar conforme sua solução)
const cached = await getFromCache(cacheKey);
if (cached) {
  return { json: cached };
}

// Consultar ViaCEP
const response = await fetch(`https://viacep.com.br/ws/${cep}/json/`);
const data = await response.json();

// Salvar no cache
await saveToCache(cacheKey, data);

return { json: data };
```

#id-3-validao-de-dados-sempre valide os dados retornados:

```javascript
// Code - Validação de Dados
const data = $json;

if (!data.cep || !data.localidade || !data.uf) {
  throw new Error('Dados incompletos retornados pela API');
}

// Validar formato do CEP
const cepRegex = /^\d{5}-\d{3}$/;
if (!cepRegex.test(data.cep)) {
  throw new Error('Formato de CEP inválido');
}
```

#id-4-tratamento-de-timeout-configure timeouts adequados:

```javascript
// HTTP Request - Configuração
Method: GET
URL: https://viacep.com.br/ws/{{ $json.cep }}/json/
Timeout: 10000 // 10 segundos
```

#Troubleshooting

#problemas-comuns

#api-no-responde-verifique conectividade com internet
- Confirme se o ViaCEP está funcionando
- Teste com CEP conhecido (ex: 01001-000)
- Verifique formato do CEP

#cep-no-encontrado-confirme se o CEP existe
- Verifique formato (00000-000)
- Teste com CEPs de diferentes regiões
- Consulte site dos Correios

#cor-dados-incompletos-verifique-se todos os campos estão sendo retornados
- Confirme se o CEP é válido
- Teste com diferentes CEPs
- Implemente validação de dados

#cor-debug-1-use-o-node Debug Helper** para inspecionar dados
2. **Teste com CEPs conhecidos** (ex: 01001-000, 20040-007)
3. **Verifique formato** do CEP de entrada
4. **Monitore logs** de erro
5. **Teste a API diretamente** no navegador

#limitaes-e-consideraes

#limitaes-do-viacep-rate limiting**: Limite de consultas por minuto
- **Dados dos Correios**: Depende da atualização dos Correios
- **CEP não encontrado**: Alguns CEPs podem não existir
- **Formato fixo**: Apenas CEPs brasileiros

#consideraes-de-performance-cache Implemente cache para consultas frequentes
- **Batch**: Evite múltiplas consultas simultâneas
- **Timeout**: Configure timeouts adequados
- **Retry**: Implemente retry logic para falhas

#alternativas-para-casos-especficos-considere

- **APIs pagas**: Maior confiabilidade e suporte
- **Bases locais**: Para consultas muito frequentes
- **APIs alternativas**: Outras fontes de dados de endereço
- **Validação local**: Para CEPs conhecidos

#prximos-passos-http-requestintegracoesbuiltin-nodeshttp-requestshttp-request - Fazer requisições HTTP
- [Expressões n8n](/logica-e-dados/expressoes) - Usar dados dinâmicos
- [Tratamento de Erros](/logica-e-dados/flow-logic/error-handling) - Lidar com falhas
- [Integrações Brasileiras](/integracoes-br/index) - Outras integrações brasileiras
- [Localização](/integracoes-br/localizacao/index) - Mais ferramentas de localização

