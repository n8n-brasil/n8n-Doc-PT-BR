:::warning
<IonicIcon name="time-outline" style={{ fontSize: '18px', color: '#cor-f59e0b-esta-pgina ainda está em processo de validação. O conteúdo pode sofrer alterações.
:::

---
title: Autenticação
sidebar_position: 3
description: Configure métodos de autenticação seguros para o n8n, incluindo 2FA, OAuth e integração com provedores externos
keywords: [n8n, autenticação, 2FA, OAuth, segurança, login, usuários]
---

#ionicicon-nameshield-checkmark-outline-style-fontsize-24px color: '#cor-ea4b71-autenticao-a autenticação é fundamental para proteger seu ambiente n8n. Neste guia, você aprenderá a configurar métodos de autenticação seguros, incluindo autenticação de dois fatores (2FA) e integração com provedores externos.

#ionicicon-nameinformation-circle-outline-style-fontsize-24px color: '#cor-ea4b71-o-que você aprenderá

- **Métodos de autenticação** disponíveis no n8n
- **Configuração de 2FA** para maior segurança
- **Integração com OAuth** e provedores externos
- **Boas práticas** de segurança
- **Troubleshooting** de problemas de autenticação

#ionicicon-namekey-outline-style-fontsize-24px color: '#cor-ea4b71-mtodos-de Autenticação

#id-1-autenticao-local-usurio-e Senha**:

- Método padrão do n8n
- Senhas criptografadas no banco de dados
- Suporte a políticas de senha

**Configuração**:

```bash
#variveis-de-ambiente-n8nbasicauthactivetrue-n8nbasicauthuseradmin
N8N_BASIC_AUTH_PASSWORD=senha-segura
```

#id-2-autenticao-de-dois-fatores (2FA)

**TOTP (Time-based One-Time Password)**:

- Códigos temporários via app (Google Authenticator, Authy)
- Validação em tempo real
- Backup codes para recuperação

**Configuração**:

1. Acesse **Settings** → **Users**
2. Selecione o usuário
3. Clique em **Enable 2FA**
4. Escaneie o QR code com seu app
5. Digite o código de verificação

#id-3-oauth-20-provedores-suportados

- **Google**: Gmail, Google Workspace
- **Microsoft**: Azure AD, Office 365
- **GitHub**: Para desenvolvedores
- **SAML**: Para empresas

**Configuração Google OAuth**:

```bash
#variveis-de-ambiente-n8ngoogleclientidyour-client-id-n8ngoogleclientsecretyour-client-secret
N8N_GOOGLE_CALLBACK_URL=https://your-domain.com/callback
```

#ionicicon-namesettings-outline-style-fontsize-24px color: '#cor-ea4b71-configurao-de Segurança

#id-1-polticas-de-senha-configuraes recomendadas**:

```json
{
  "minLength": 12,
  "requireUppercase": true,
  "requireLowercase": true,
  "requireNumbers": true,
  "requireSpecialChars": true,
  "maxAge": 90, // dias
  "preventReuse": 5 // últimas senhas
}
```

#id-2-sesses-e-timeouts-configurao de sessão**:

```bash
#tempo-de-sesso-em-segundos
N8N_SESSION_LIFETIME=86400 #id-24-horas

#tempo-de-inatividade-n8nsessiontimeout3600 #id-1-hora

#renovao-automtica-n8nsessionextendonactivitytrue

#id-3-rate-limiting-proteo-contra ataques**:

```bash
#tentativas-de-login-n8nloginattemptslimit5-n8nloginattemptstimeout900 #id-15-minutos

#bloqueio-de-ip-n8nipwhitelist1921681024100008

#ionicicon-nameshield-outline-style-fontsize-24px color: '#cor-ea4b71-integrao-com Provedores Externos

#id-1-google-oauth-configurao-no Google Cloud Console**:

1. **Criar projeto** no Google Cloud Console
2. **Habilitar Google+ API**
3. **Criar credenciais OAuth 2.0**
4. **Configurar URIs de redirecionamento**

**Variáveis de ambiente**:

```bash
N8N_GOOGLE_CLIENT_ID=your-client-id
N8N_GOOGLE_CLIENT_SECRET=your-client-secret
N8N_GOOGLE_CALLBACK_URL=https://your-domain.com/callback
N8N_GOOGLE_SCOPES=email profile
```

#id-2-microsoft-azure-ad-configurao no Azure Portal**:

1. **Registrar aplicação** no Azure AD
2. **Configurar permissões** necessárias
3. **Gerar client secret**
4. **Configurar redirect URIs**

**Variáveis de ambiente**:

```bash
N8N_MICROSOFT_CLIENT_ID=your-client-id
N8N_MICROSOFT_CLIENT_SECRET=your-client-secret
N8N_MICROSOFT_TENANT_ID=your-tenant-id
N8N_MICROSOFT_CALLBACK_URL=https://your-domain.com/callback
```

#id-3-saml-20-para-ambientes empresariais**:

```bash
#configurao-saml-n8nsamlenabledtrue-n8nsamlissueryour-issuer-n8nsamlentrypointhttpsyour-idpcomsso
N8N_SAML_CERT=path/to/certificate.pem
```

#ionicicon-namecheckmark-circle-outline-style-fontsize-24px color: '#cor-ea4b71-boas-prticas

#id-1-segurana-de-produo-recomendaes

- **Use HTTPS** em todos os ambientes
- **Configure 2FA** para todos os usuários
- **Implemente políticas** de senha forte
- **Monitore logs** de autenticação
- **Use variáveis de ambiente** para credenciais

#id-2-gerenciamento-de-usurios-processos recomendados**:

- **Onboarding**: Criação padronizada de contas
- **Offboarding**: Desativação imediata
- **Auditoria**: Revisão regular de acessos
- **Treinamento**: Capacitação em segurança

#id-3-monitoramento-alertas-configurar **Tentativas de login** falhadas
- **Logins de IPs** desconhecidos
- **Alterações** em configurações de segurança
- **Falhas** de autenticação

#ionicicon-nameplay-circle-outline-style-fontsize-24px color: '#cor-ea4b71-exemplos-prticos

#exemplo-1-configurao-google-oauth

**Passo a passo**:

1. **Google Cloud Console**:

   ```bash
   #criar-projeto-gcloud-projects-create n8n-auth-project
   
   #habilitar-apis-gcloud-services-enable plus.googleapis.com
   ```

2. **Criar credenciais**:
   - Tipo: OAuth 2.0 Client ID
   - URIs autorizados: `https://your-domain.com`
   - URIs de redirecionamento: `https://your-domain.com/callback`

3. **Configurar n8n**:

   ```bash
   N8N_GOOGLE_CLIENT_ID=your-client-id
   N8N_GOOGLE_CLIENT_SECRET=your-client-secret
   N8N_GOOGLE_CALLBACK_URL=https://your-domain.com/callback
   ```

#exemplo-2-implementao-2fa-fluxo de configuração**:

```javascript
// Gerar QR code para 2FA
const qrCode = generateTOTPQRCode({
  secret: user.totpSecret,
  label: user.email,
  issuer: 'n8n'
});

// Validar código 2FA
const isValid = validateTOTPCode({
  secret: user.totpSecret,
  code: userInput,
  window: 2 // tolerância de 2 períodos
});
```

#exemplo-3-rate-limiting-implementao de proteção**:

```javascript
// Middleware de rate limiting
const rateLimit = {
  windowMs: 15 * 60 * 1000, // 15 minutos
  max: 5, // máximo 5 tentativas
  message: 'Muitas tentativas de login. Tente novamente em 15 minutos.'
};

// Bloqueio de IP
const ipWhitelist = ['192.168.1.0/24', '10.0.0.0/8'];
const isAllowedIP = (ip) => ipWhitelist.some(range => ipInRange(ip, range));
```

#ionicicon-namewarning-outline-style-fontsize-24px color: '#cor-ea4b71-troubleshooting

#problemas-comuns-erro-de-login

- Verifique credenciais
- Confirme se a conta está ativa
- Verifique políticas de senha
- Teste conectividade com provedor

**2FA não funciona**:

- Sincronize relógio do dispositivo
- Use backup codes se necessário
- Reconfigure 2FA se necessário
- Verifique app autenticador

**OAuth falha**:

- Confirme URIs de redirecionamento
- Verifique client ID/secret
- Teste conectividade com provedor
- Revise permissões da aplicação

#cor-debugging-logs-teis-bash
#logs-de-autenticao-tail-f /var/log/n8n/auth.log

#logs-de-oauth-grep-oauth /var/log/n8n/app.log

#logs-de-erro-grep-error /var/log/n8n/error.log
```

**Ferramentas de diagnóstico**:

1. **Teste de conectividade** com provedores
2. **Validação de certificados** SSL/TLS
3. **Verificação de timezone** para 2FA
4. **Análise de logs** detalhada

#ionicicon-namearrow-forward-circle-outline-style-fontsize-24px color: '#cor-ea4b71-prximos-passos

1. **Configure 2FA** para todos os usuários
2. **Implemente OAuth** se necessário
3. **Configure políticas** de senha
4. **Monitore logs** de autenticação
5. **Teste cenários** de recuperação

#ionicicon-namehelp-circle-outline-style-fontsize-24px color: '#cor-ea4b71-recursos-relacionados

- **[Criar e Editar Usuários](./criar-editar-usuarios)** - Gerenciamento de usuários
- **[Roles e Permissões](./roles-permissoes)** - Controle de acesso
- **[Segurança](../../hosting-n8n/seguranca/)** - Configurações de segurança
- **[Referência](../../referencia/)** - Documentação técnica
- **[Comunidade](../../comunidade/)** - Suporte e dicas

---

**<IonicIcon name="shield-checkmark-outline" style={{ fontSize: '16px', color: '#cor-ea4b71-pronto-para proteger? Comece configurando 2FA para seus usuários!**

