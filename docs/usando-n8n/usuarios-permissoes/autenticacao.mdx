---
title: Autenticação
sidebar_position: 1
description: Configuração de métodos de autenticação seguros no n8n, incluindo 2FA e integração com provedores externos
keywords: [n8n, autenticação, 2FA, OAuth, SAML, segurança, login]
---

:::warning
<IonicIcon name="time-outline" style={{fontSize: '18px', color: '#ea4b71'}} />
Esta página ainda está em processo de validação. O conteúdo pode sofrer alterações.
:::

<IonicIcon name="shield-checkmark-outline" style={{fontSize: '24px', color: '#ea4b71'}} />
## Autenticação

A autenticação é fundamental para proteger seu ambiente n8n. Neste guia, você aprenderá a configurar métodos de autenticação seguros, incluindo autenticação de dois fatores (2FA) e integração com provedores externos.

<IonicIcon name="information-circle-outline" style={{fontSize: '24px', color: '#ea4b71'}} />
## Políticas de Senha

### Configuração de Políticas

```json
{
  "minLength": 12,
  "requireUppercase": true,
  "requireLowercase": true,
  "requireNumbers": true,
  "requireSpecialChars": true,
  "maxAge": 90,
  "preventReuse": 5
}
```

### Sessões e Timeouts

**Configuração de sessão**:

```bash
# Tempo de sessão em segundos
N8N_SESSION_LIFETIME=86400  # 24 horas

# Tempo de inatividade
N8N_SESSION_TIMEOUT=3600    # 1 hora

# Renovação automática
N8N_SESSION_EXTEND_ON_ACTIVITY=true
```

### Rate Limiting

**Proteção contra ataques**:

```bash
# Tentativas de login
N8N_LOGIN_ATTEMPTS_LIMIT=5
N8N_LOGIN_ATTEMPTS_TIMEOUT=900  # 15 minutos

# Bloqueio de IP
N8N_IP_WHITELIST=192.168.1.0/24,10.0.0.0/8
```

<IonicIcon name="shield-outline" style={{fontSize: '24px', color: '#ea4b71'}} />
## Integração com Provedores Externos

### Google OAuth

**Configuração no Google Cloud Console**:

1. **Criar projeto** no Google Cloud Console
2. **Habilitar Google+ API**
3. **Criar credenciais OAuth 2.0**
4. **Configurar URIs de redirecionamento**

**Variáveis de ambiente**:

```bash
N8N_GOOGLE_CLIENT_ID=your-client-id
N8N_GOOGLE_CLIENT_SECRET=your-client-secret
N8N_GOOGLE_CALLBACK_URL=https://your-domain.com/callback
N8N_GOOGLE_SCOPES=email profile
```

### Microsoft Azure AD

**Configuração no Azure Portal**:

1. **Registrar aplicação** no Azure AD
2. **Configurar permissões** necessárias
3. **Gerar client secret**
4. **Configurar redirect URIs**

**Variáveis de ambiente**:

```bash
N8N_MICROSOFT_CLIENT_ID=your-client-id
N8N_MICROSOFT_CLIENT_SECRET=your-client-secret
N8N_MICROSOFT_TENANT_ID=your-tenant-id
N8N_MICROSOFT_CALLBACK_URL=https://your-domain.com/callback
```

### SAML 2.0

**Para ambientes empresariais**:

```bash
# Configuração SAML
N8N_SAML_ENABLED=true
N8N_SAML_ISSUER=your-issuer
N8N_SAML_ENTRY_POINT=https://your-idp.com/sso
N8N_SAML_CERT=path/to/certificate.pem
```

<IonicIcon name="checkmark-circle-outline" style={{fontSize: '24px', color: '#ea4b71'}} />
## Autenticação de Dois Fatores (2FA)

### Configuração TOTP

```javascript
// Gerar secret para 2FA
const secret = generateTOTPSecret({
  issuer: 'n8n'
});

// Validar código 2FA
const isValid = validateTOTPCode({
  code: userInput,
  window: 2 // tolerância de 2 períodos
});
```

### Exemplo de Implementação

```javascript
// Middleware de rate limiting
const rateLimit = {
  max: 5, // máximo 5 tentativas
  message: 'Muitas tentativas de login. Tente novamente em 15 minutos.'
};

// Bloqueio de IP
const ipWhitelist = ['192.168.1.0/24', '10.0.0.0/8'];
const isAllowedIP = (ip) => ipWhitelist.some(range => ipInRange(ip, range));
```

<IonicIcon name="warning-outline" style={{fontSize: '24px', color: '#ea4b71'}} />
## Troubleshooting

### Problemas Comuns

**Erro de login**:
- Verifique credenciais
- Confirme se a conta está ativa
- Verifique políticas de senha
- Teste conectividade com provedor

**2FA não funciona**:
- Sincronize relógio do dispositivo
- Use backup codes se necessário
- Reconfigure 2FA se necessário
- Verifique app autenticador

**OAuth falha**:
- Confirme URIs de redirecionamento
- Verifique client ID/secret
- Teste conectividade com provedor
- Revise permissões da aplicação

### Logs de Diagnóstico

**Logs de autenticação**:
```bash
tail -f /var/log/n8n/auth.log
```

**Logs de OAuth**:
```bash
grep oauth /var/log/n8n/app.log
```

**Logs de erro**:
```bash
grep error /var/log/n8n/error.log
```

### Ferramentas de Diagnóstico

1. **Teste de conectividade** com provedores
2. **Validação de certificados** SSL/TLS
3. **Verificação de timezone** para 2FA
4. **Análise de logs** detalhada

<IonicIcon name="arrow-forward-circle-outline" style={{fontSize: '24px', color: '#ea4b71'}} />

<IonicIcon name="shield-checkmark-outline" style={{fontSize: '16px', color: '#ea4b71'}} />
**Próximos Passos**:
