---
id: seguranca-jwt
title: Segurança em Integrações - Credenciais e Tokens
sidebar_label: Segurança em Integrações
description: Boas práticas de segurança para credenciais e tokens no n8n
---

# <IonicIcon name="shield-checkmark-outline" style={{ fontSize: '24px', color: '#ea4b71' }} /> Segurança em Integrações - Credenciais e Tokens

## <IonicIcon name="warning-outline" style={{ fontSize: '24px', color: '#ea4b71' }} /> O Contexto Real do n8n

O n8n é uma **plataforma de automação** que se conecta com APIs externas. A segurança aqui é sobre **proteger credenciais de integração**, não autenticação web tradicional.

### Como o n8n Funciona

```javascript
// <IonicIcon name="checkmark-circle-outline" style={{ fontSize: '16px', color: '#10b981' }} /> n8n armazena credenciais de forma segura
// As credenciais são criptografadas no banco de dados
// Não são expostas no frontend
```

> **<IonicIcon name="bulb-outline" style={{ fontSize: '16px', color: '#f59e0b' }} /> Importante**: O n8n não loga ou exporta credenciais por padrão, mas se você logar seus valores, a responsabilidade pela exclusão desses dados é sua.

## <IonicIcon name="alert-circle-outline" style={{ fontSize: '24px', color: '#ea4b71' }} /> Problemas Reais no n8n

### 1. Credenciais Expostas em Logs

```javascript
// <IonicIcon name="close-circle-outline" style={{ fontSize: '16px', color: '#ef4444' }} /> PERIGOSO - Logar credenciais
console.log('API Key:', apiKey)
console.log('Token:', token)

// <IonicIcon name="checkmark-circle-outline" style={{ fontSize: '16px', color: '#10b981' }} /> SEGURO - Logar apenas metadados
console.log('API conectada:', 'Google Sheets')
console.log('Status:', 'success')
```

### 2. Credenciais em Variáveis de Ambiente

```bash
# <IonicIcon name="close-circle-outline" style={{ fontSize: '16px', color: '#ef4444' }} /> PERIGOSO - Credenciais em texto plano
N8N_GOOGLE_API_KEY=AIzaSyC...
N8N_SLACK_TOKEN=xoxb-123...

# <IonicIcon name="checkmark-circle-outline" style={{ fontSize: '16px', color: '#10b981' }} /> SEGURO - Usar sistema de credenciais do n8n
# Configurar via interface web ou API
```

### 3. Tokens em Workflows

```javascript
// <IonicIcon name="close-circle-outline" style={{ fontSize: '16px', color: '#ef4444' }} /> PERIGOSO - Token hardcoded
const token = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."

// <IonicIcon name="checkmark-circle-outline" style={{ fontSize: '16px', color: '#10b981' }} /> SEGURO - Usar credenciais do n8n
const credentials = $credentials.googleSheets
```

## <IonicIcon name="construct-outline" style={{ fontSize: '24px', color: '#ea4b71' }} /> Configuração Segura no n8n

### 1. Usar Credenciais do n8n

```javascript
// <IonicIcon name="checkmark-circle-outline" style={{ fontSize: '16px', color: '#10b981' }} /> Configuração segura
const httpRequest = {
  method: 'GET',
  url: 'https://api.exemplo.com/dados',
  authentication: 'genericCredentialType',
  genericAuthType: 'httpHeaderAuth',
  httpHeaderAuth: {
    name: 'Authorization',
    value: 'Bearer {{ $credentials.apiExemplo.token }}'
  }
}
```

### 2. Configurar Credenciais

```bash
# <IonicIcon name="checkmark-circle-outline" style={{ fontSize: '16px', color: '#10b981' }} /> Variáveis de ambiente para configuração
N8N_ENCRYPTION_KEY=sua_chave_de_32_caracteres
N8N_DATABASE_ENCRYPTION_KEY=sua_chave_de_32_caracteres
N8N_SECRETS_ENCRYPTION_KEY=sua_chave_de_32_caracteres
```

### 3. Headers de Segurança

```nginx
# <IonicIcon name="checkmark-circle-outline" style={{ fontSize: '16px', color: '#10b981' }} /> Headers para n8n
add_header X-Frame-Options DENY always;
add_header X-Content-Type-Options nosniff always;
add_header X-XSS-Protection "1; mode=block" always;
add_header Strict-Transport-Security "max-age=31536000" always;
```

## <IonicIcon name="shield-outline" style={{ fontSize: '24px', color: '#ea4b71' }} /> Tipos de Credenciais no n8n

### 1. API Keys

```javascript
// <IonicIcon name="checkmark-circle-outline" style={{ fontSize: '16px', color: '#10b981' }} /> Configuração segura de API Key
{
  "name": "Google Sheets API",
  "type": "googleSheetsOAuth2Api",
  "data": {
    "accessToken": "encrypted_token",
    "refreshToken": "encrypted_refresh_token"
  }
}
```

### 2. OAuth Tokens

```javascript
// <IonicIcon name="checkmark-circle-outline" style={{ fontSize: '16px', color: '#10b981' }} /> Configuração OAuth2
{
  "name": "Slack Integration",
  "type": "slackOAuth2Api",
  "data": {
    "accessToken": "encrypted_token",
    "scope": "chat:write,channels:read"
  }
}
```

### 3. Basic Auth

```javascript
// <IonicIcon name="checkmark-circle-outline" style={{ fontSize: '16px', color: '#10b981' }} /> Configuração Basic Auth
{
  "name": "Internal API",
  "type": "httpBasicAuth",
  "data": {
    "user": "encrypted_username",
    "password": "encrypted_password"
  }
}
```

## <IonicIcon name="refresh-outline" style={{ fontSize: '24px', color: '#ea4b71' }} /> Rotação de Credenciais

### 1. Monitoramento de Expiração

```javascript
// <IonicIcon name="checkmark-circle-outline" style={{ fontSize: '16px', color: '#10b981' }} /> Verificar expiração de tokens

  
  return true
}
```

### 2. Refresh Automático

```javascript
// <IonicIcon name="checkmark-circle-outline" style={{ fontSize: '16px', color: '#10b981' }} /> Refresh automático de tokens
,
      body: JSON.stringify({
        refreshToken: credentials.refreshToken
      })
    })
    
    const newCredentials = await response.json()
    return newCredentials
  } catch (error) {
    console.error('Erro ao renovar token:', error)
    return null
  }
}
```

## <IonicIcon name="close-circle-outline" style={{ fontSize: '24px', color: '#ea4b71' }} /> O que NUNCA fazer no n8n

```javascript
// <IonicIcon name="close-circle-outline" style={{ fontSize: '16px', color: '#ef4444' }} /> NUNCA hardcodar credenciais
const apiKey = "sk-1234567890abcdef"

// <IonicIcon name="close-circle-outline" style={{ fontSize: '16px', color: '#ef4444' }} /> NUNCA logar tokens
console.log('Token:', token)

// <IonicIcon name="close-circle-outline" style={{ fontSize: '16px', color: '#ef4444' }} /> NUNCA expor credenciais em URLs
const url = `https://api.exemplo.com/data?token=${token}`

// <IonicIcon name="close-circle-outline" style={{ fontSize: '16px', color: '#ef4444' }} /> NUNCA armazenar em localStorage
localStorage.setItem('n8n-credentials', JSON.stringify(credentials))
```

## <IonicIcon name="search-outline" style={{ fontSize: '24px', color: '#ea4b71' }} /> Verificação de Segurança

### 1. Auditoria de Credenciais

```javascript
// <IonicIcon name="checkmark-circle-outline" style={{ fontSize: '16px', color: '#10b981' }} /> Verificar credenciais expostas
} /> Credencial segura:', node.name)
        } else {
          console.warn('<IonicIcon name="warning-outline" style={{ fontSize: '16px', color: '#f59e0b' }} /> Credencial potencialmente insegura:', node.name)
        }
      }
    })
  })
}
```

### 2. Monitoramento de Acesso

```javascript
// <IonicIcon name="checkmark-circle-outline" style={{ fontSize: '16px', color: '#10b981' }} /> Logs de segurança

  
  console.log('<IonicIcon name="shield-outline" style={{ fontSize: '16px', color: '#ea4b71' }} /> Evento de segurança:', logEntry)
}
```

## <IonicIcon name="list-outline" style={{ fontSize: '24px', color: '#ea4b71' }} /> Checklist de Segurança para n8n

- [ ] **Credenciais Criptografadas**: Usar sistema de credenciais do n8n
- [ ] **Variáveis de Ambiente**: Configurar chaves de criptografia
- [ ] **Logs Seguros**: Nunca logar tokens ou senhas
- [ ] **Rotação de Tokens**: Implementar refresh automático
- [ ] **Monitoramento**: Auditoria regular de credenciais
- [ ] **HTTPS**: Sempre usar conexões seguras
- [ ] **Headers de Segurança**: Configurar no proxy/reverse proxy
- [ ] **Backup Seguro**: Criptografar backups de credenciais

## <IonicIcon name="construct-outline" style={{ fontSize: '24px', color: '#ea4b71' }} /> Configuração Específica do n8n

### Docker Compose Seguro

```yaml
version: '3.8'
services:
  n8n:
    image: n8nio/n8n:latest
    environment:
      # Criptografia
      - N8N_ENCRYPTION_KEY=${N8N_ENCRYPTION_KEY}
      - N8N_DATABASE_ENCRYPTION_KEY=${N8N_DATABASE_ENCRYPTION_KEY}
      - N8N_SECRETS_ENCRYPTION_KEY=${N8N_SECRETS_ENCRYPTION_KEY}
      
      # Segurança
      - N8N_BASIC_AUTH_ACTIVE=true
      - N8N_BASIC_AUTH_USER=${N8N_ADMIN_USER}
      - N8N_BASIC_AUTH_PASSWORD=${N8N_ADMIN_PASSWORD}
      
      # HTTPS
      - N8N_PROTOCOL=https
      - N8N_SSL_KEY=/certs/private.key
      - N8N_SSL_CERT=/certs/certificate.crt
      
      # Sessão
      - N8N_SESSION_COOKIE_SECURE=true
      - N8N_SESSION_COOKIE_HTTPONLY=true
      - N8N_SESSION_COOKIE_SAMESITE=strict
    volumes:
      - n8n_data:/home/node/.n8n
      - ./certs:/certs:ro
    ports:
      - "5678:5678"
```

### Nginx com Segurança

```nginx
server {
    listen 443 ssl http2;
    server_name n8n.seudominio.com;
    
    # SSL
    ssl_certificate /path/to/cert.pem;
    ssl_certificate_key /path/to/key.pem;
    
    # Headers de segurança
    add_header X-Frame-Options DENY always;
    add_header X-Content-Type-Options nosniff always;
    add_header X-XSS-Protection "1; mode=block" always;
    add_header Strict-Transport-Security "max-age=31536000; includeSubDomains" always;
    
    # Proxy para n8n
    location / {
        proxy_pass http://n8n:5678;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}
```

## <IonicIcon name="target-outline" style={{ fontSize: '24px', color: '#ea4b71' }} /> Casos de Uso Reais

### 1. Integração com Google Sheets

```javascript
// <IonicIcon name="checkmark-circle-outline" style={{ fontSize: '16px', color: '#10b981' }} /> Configuração segura
const googleSheetsNode = {
  resource: 'spreadsheet',
  operation: 'read',
  spreadsheetId: '{{ $json.spreadsheetId }}',
  range: 'A1:Z1000',
  // Usa credenciais OAuth2 do n8n automaticamente
}
```

### 2. Webhook Seguro

```javascript
// <IonicIcon name="checkmark-circle-outline" style={{ fontSize: '16px', color: '#10b981' }} /> Webhook com autenticação
const webhookNode = {
  httpMethod: 'POST',
  path: 'webhook-seguro',
  authentication: 'genericCredentialType',
  genericAuthType: 'httpHeaderAuth',
  httpHeaderAuth: {
    name: 'X-API-Key',
    value: '{{ $credentials.webhookApi.key }}'
  }
}
```

### 3. API Externa com Rate Limiting

```javascript
// <IonicIcon name="checkmark-circle-outline" style={{ fontSize: '16px', color: '#10b981' }} /> Configuração com rate limiting
const httpRequestNode = {
  method: 'GET',
  url: 'https://api.externa.com/dados',
  authentication: 'genericCredentialType',
  genericAuthType: 'httpHeaderAuth',
  httpHeaderAuth: {
    name: 'Authorization',
    value: 'Bearer {{ $credentials.apiExterna.token }}'
  },
  // Rate limiting automático do n8n
}
```

## <IonicIcon name="link-outline" style={{ fontSize: '24px', color: '#ea4b71' }} /> Recursos Adicionais

- [n8n Security Documentation](https://docs.n8n.io/security/)
- [n8n Credentials Guide](https://docs.n8n.io/credentials/)
- [n8n External Secrets](https://docs.n8n.io/external-secrets/)
- [OWASP API Security](https://owasp.org/www-project-api-security/)
- [n8n Community Security](https://community.n8n.io/c/security/)

## <IonicIcon name="library-outline" style={{ fontSize: '24px', color: '#ea4b71' }} /> Referências Validadas

- [n8n Docs - Privacy and Security](https://docs.n8n.io/privacy-security/)
- [n8n Docs - Credentials](https://docs.n8n.io/credentials/)
- [n8n Docs - External Secrets](https://docs.n8n.io/external-secrets/)
- [OWASP Secure Headers Project](https://owasp.org/www-project-secure-headers/)
- [Docker - Manage Data](https://docs.docker.com/storage/volumes/)

## <IonicIcon name="bulb-outline" style={{ fontSize: '24px', color: '#ea4b71' }} /> Dica Importante

> **Lembre-se**: No n8n, a segurança é sobre **proteger credenciais de integração**, não sobre autenticação web tradicional. Use sempre o sistema de credenciais integrado da plataforma.

### **<IonicIcon name="checkmark-circle-outline" style={{ fontSize: '24px', color: '#10b981' }} /> Validação de Segurança**

Este documento foi validado através de:
- <IonicIcon name="checkmark-circle-outline" style={{ fontSize: '16px', color: '#10b981' }} /> **Documentação oficial do n8n**
- <IonicIcon name="checkmark-circle-outline" style={{ fontSize: '16px', color: '#10b981' }} /> **Artigos especializados em segurança**
- <IonicIcon name="checkmark-circle-outline" style={{ fontSize: '16px', color: '#10b981' }} /> **Discussões da comunidade n8n**
- <IonicIcon name="checkmark-circle-outline" style={{ fontSize: '16px', color: '#10b981' }} /> **Práticas comprovadas em produção**

Implemente essas práticas para proteger suas integrações e dados sensíveis no n8n.

